# Block 类

用于创建一个块。通常不直接调用，推荐使用 workspace.newBlock()。

**签名:**

```javascript
export declare class Block implements IASTNodeLocation, IDeletable
```

**实现:** [IASTNodeLocation](/reference/js/blockly.iastnodelocation_interface.html), [IDeletable](/reference/js/blockly.ideletable_interface.html)

## 构造函数

| 构造函数                                                                                                              | 修饰符 | 描述                    |
| --------------------------------------------------------------------------------------------------------------------- | ------ | ----------------------- |
| [(constructor)(workspace, prototypeName, opt_id)](/reference/js/blockly.block_class._constructor__1_constructor.html) |        | 构造 `Block` 类的新实例 |

## Properties

| 属性 | 修饰符 | 类型 | 描述 |
| ----------------------------------------------------------------------------------------------- | ------------------- | ---------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [childBlocks\_](/reference/js/blockly.block_class.childblocks__property.html) | `protected` | this\[\] | |
| [collapsed\_](/reference/js/blockly.block_class.collapsed__property.html) | `protected` | boolean | |
| [COLLAPSED_FIELD_NAME](/reference/js/blockly.block_class.collapsed_field_name_property.html) | `static` `readonly` | string | The language-neutral ID given to the collapsed field. |
| [COLLAPSED_INPUT_NAME](/reference/js/blockly.block_class.collapsed_input_name_property.html) | `static` `readonly` | string | The language-neutral ID given to the collapsed input. |
| [colour\_](/reference/js/blockly.block_class.colour__property.html) | `protected` | string | Colour of the block in '#RRGGBB' format. |
| [compose?](/reference/js/blockly.block_class.compose_property.html) | | (p1: [Block](/reference/js/blockly.block_class.html)) => void | _(Optional)_ An optional function that reconfigures the block based on the contents of the mutator dialog. |
| [contextMenu](/reference/js/blockly.block_class.contextmenu_property.html) | | boolean | |
| [data](/reference/js/blockly.block_class.data_property.html) | | string | null | Optional text data that round-trips between blocks and XML. Has no effect. May be used by 3rd parties for meta information. |
| [decompose?](/reference/js/blockly.block_class.decompose_property.html) | | (p1: [Workspace](/reference/js/blockly.workspace_class.html)) => [Block](/reference/js/blockly.block_class.html) | _(Optional)_ An optional function that populates the mutator's dialog with this block's components. |
| [destroy?](/reference/js/blockly.block_class.destroy_property.html) | | () => void | _(Optional)_ An optional method called during disposal. |
| [domToMutation?](/reference/js/blockly.block_class.domtomutation_property.html) | | (p1: Element) => void | _(Optional)_ An optional deserialization method for defining how to deserialize the mutation state from XML. This must be coupled with defining `mutationToDom`. |
| [getDeveloperVariables?](/reference/js/blockly.block_class.getdevelopervariables_property.html) | | () => string\[\] | _(Optional)_ An optional property for declaring developer variables. Return a list of variable names for use by generators. Developer variables are never shown to the user, but are declared as global variables in the generated code. |
| [hat?](/reference/js/blockly.block_class.hat_property.html) | | string | _(Optional)_ Name of the type of hat. |
| [helpUrl](/reference/js/blockly.block_class.helpurl_property.html) | | string | Function | null | String for block help, or function that returns a URL. Null for no help. |
| [icons](/reference/js/blockly.block_class.icons_property.html) | | [IIcon](/reference/js/blockly.iicon_interface.html)\[\] | |
| [id](/reference/js/blockly.block_class.id_property.html) | | string | |
| [init?](/reference/js/blockly.block_class.init_property.html) | | () => void | _(Optional)_ An optional method called during initialization. |
| [inputList](/reference/js/blockly.block_class.inputlist_property.html) | | Input\[\] | |
| [inputsInline?](/reference/js/blockly.block_class.inputsinline_property.html) | | boolean | _(Optional)_ |
| [inputsInlineDefault?](/reference/js/blockly.block_class.inputsinlinedefault_property.html) | | boolean | _(Optional)_ |
| [isInFlyout](/reference/js/blockly.block_class.isinflyout_property.html) | | boolean | |
| [isInMutator](/reference/js/blockly.block_class.isinmutator_property.html) | | boolean | |
| [isInsertionMarker\_](/reference/js/blockly.block_class.isinsertionmarker__property.html) | `protected` | boolean | True if this block is an insertion marker. |
| [loadExtraState?](/reference/js/blockly.block_class.loadextrastate_property.html) | | (p1: any) => void | _(Optional)_ An optional serialization method for defining how to deserialize the block's extra state (eg mutation state) from something JSON compatible. This must be coupled with defining `saveExtraState`. |
| [mutationToDom?](/reference/js/blockly.block_class.mutationtodom_property.html) | | (...p1: any\[\]) => Element | _(Optional)_ An optional serialization method for defining how to serialize the mutation state to XML. This must be coupled with defining `domToMutation`. |
| [nextConnection](/reference/js/blockly.block_class.nextconnection_property.html) | | [Connection](/reference/js/blockly.connection_class.html) | null | |
| [onchange?](/reference/js/blockly.block_class.onchange_property.html) | | ((p1: [Abstract](/reference/js/blockly.events_namespace.abstract_class.html)) => void) | null | _(Optional)_ An optional callback method to use whenever the block's parent workspace changes. This is usually only called from the constructor, the block type initializer function, or an extension initializer function. |
| [outputConnection](/reference/js/blockly.block_class.outputconnection_property.html) | | [Connection](/reference/js/blockly.connection_class.html) | null | |
| [outputShape\_](/reference/js/blockly.block_class.outputshape__property.html) | `protected` | number | null | |
| [parentBlock\_](/reference/js/blockly.block_class.parentblock__property.html) | `protected` | this | null | |
| [previousConnection](/reference/js/blockly.block_class.previousconnection_property.html) | | [Connection](/reference/js/blockly.connection_class.html) | null | |
| [rendered](/reference/js/blockly.block_class.rendered_property.html) | | boolean | null | |
| [RTL](/reference/js/blockly.block_class.rtl_property.html) | | boolean | |
| [saveExtraState?](/reference/js/blockly.block_class.saveextrastate_property.html) | | (doFullSerialization?: boolean) => any | _(Optional)_ An optional serialization method for defining how to serialize the block's extra state (eg mutation state) to something JSON compatible. This must be coupled with defining `loadExtraState`. |
| [styleName\_](/reference/js/blockly.block_class.stylename__property.html) | `protected` | string | Name of the block style. |
| [suppressPrefixSuffix](/reference/js/blockly.block_class.suppressprefixsuffix_property.html) | | boolean | null | An optional property for suppressing adding STATEMENT_PREFIX and STATEMENT_SUFFIX to generated code. |
| [tooltip](/reference/js/blockly.block_class.tooltip_property.html) | | [Tooltip.TipInfo](/reference/js/blockly.tooltip_namespace.tipinfo_typealias.html) | |
| [type](/reference/js/blockly.block_class.type_property.html) | | string | |
| [workspace](/reference/js/blockly.block_class.workspace_property.html) | | [Workspace](/reference/js/blockly.workspace_class.html) | |

## Methods

| Method                                                                                                                   | Modifiers   | Description                                                                                                                                                                                                                                                                                                                                                          |
| ------------------------------------------------------------------------------------------------------------------------ | ----------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [addIcon(icon)](/reference/js/blockly.block_class.addicon_1_method.html)                                                 |             | Adds the given icon to the block.                                                                                                                                                                                                                                                                                                                                    |
| [allInputsFilled(opt_shadowBlocksAreFilled)](/reference/js/blockly.block_class.allinputsfilled_1_method.html)            |             | Recursively checks whether all statement and value inputs are filled with blocks. Also checks all following statement blocks in this stack.                                                                                                                                                                                                                          |
| [appendDummyInput(name)](/reference/js/blockly.block_class.appenddummyinput_1_method.html)                               |             | Appends a dummy input row.                                                                                                                                                                                                                                                                                                                                           |
| [appendEndRowInput(name)](/reference/js/blockly.block_class.appendendrowinput_1_method.html)                             |             | Appends an input that ends the row.                                                                                                                                                                                                                                                                                                                                  |
| [appendInput(input)](/reference/js/blockly.block_class.appendinput_1_method.html)                                        |             | Appends the given input row. <br /> Allows for custom inputs to be appended to the block.                                                                                                                                                                                                                                                                            |
| [appendStatementInput(name)](/reference/js/blockly.block_class.appendstatementinput_1_method.html)                       |             | Appends a statement input row.                                                                                                                                                                                                                                                                                                                                       |
| [appendValueInput(name)](/reference/js/blockly.block_class.appendvalueinput_1_method.html)                               |             | Appends a value input row.                                                                                                                                                                                                                                                                                                                                           |
| [bumpNeighbours()](/reference/js/blockly.block_class.bumpneighbours_1_method.html)                                       |             | Bump unconnected blocks out of alignment. Two blocks which aren't actually connected should not coincidentally line up on screen.                                                                                                                                                                                                                                    |
| [dispose(healStack)](/reference/js/blockly.block_class.dispose_1_method.html)                                            |             | Dispose of this block.                                                                                                                                                                                                                                                                                                                                               |
| [disposeInternal()](/reference/js/blockly.block_class.disposeinternal_1_method.html)                                     | `protected` | Disposes of this block without doing things required by the top block. E.g. does not fire events, unplug the block, etc.                                                                                                                                                                                                                                             |
| [doInit\_()](/reference/js/blockly.block_class.doinit__1_method.html)                                                    | `protected` | Calls the init() function and handles associated event firing, etc.                                                                                                                                                                                                                                                                                                  |
| [getChildren(ordered)](/reference/js/blockly.block_class.getchildren_1_method.html)                                      |             | Find all the blocks that are directly nested inside this one. Includes value and statement inputs, as well as any following statement. Excludes any connection on an output tab or any preceding statement. Blocks are optionally sorted by position; top to bottom.                                                                                                 |
| [getColour()](/reference/js/blockly.block_class.getcolour_1_method.html)                                                 |             | Get the colour of a block.                                                                                                                                                                                                                                                                                                                                           |
| [getCommentText()](/reference/js/blockly.block_class.getcommenttext_1_method.html)                                       |             | Returns the comment on this block (or null if there is no comment).                                                                                                                                                                                                                                                                                                  |
| [getDescendants(ordered)](/reference/js/blockly.block_class.getdescendants_1_method.html)                                |             | Find all the blocks that are directly or indirectly nested inside this one. Includes this block in the list. Includes value and statement inputs, as well as any following statements. Excludes any connection on an output tab or any preceding statements. Blocks are optionally sorted by position; top to bottom.                                                |
| [getField(name)](/reference/js/blockly.block_class.getfield_1_method.html)                                               |             | Returns the named field from a block.                                                                                                                                                                                                                                                                                                                                |
| [getFieldValue(name)](/reference/js/blockly.block_class.getfieldvalue_1_method.html)                                     |             | Returns the language-neutral value of the given field.                                                                                                                                                                                                                                                                                                               |
| [getHue()](/reference/js/blockly.block_class.gethue_1_method.html)                                                       |             | Get the HSV hue value of a block. Null if hue not set.                                                                                                                                                                                                                                                                                                               |
| [getIcon(type)](/reference/js/blockly.block_class.geticon_1_method.html)                                                 |             |                                                                                                                                                                                                                                                                                                                                                                      |
| [getIcons()](/reference/js/blockly.block_class.geticons_1_method.html)                                                   |             |                                                                                                                                                                                                                                                                                                                                                                      |
| [getInheritedDisabled()](/reference/js/blockly.block_class.getinheriteddisabled_1_method.html)                           |             | Get whether the block is disabled or not due to parents. The block's own disabled property is not considered.                                                                                                                                                                                                                                                        |
| [getInput(name)](/reference/js/blockly.block_class.getinput_1_method.html)                                               |             | Fetches the named input object.                                                                                                                                                                                                                                                                                                                                      |
| [getInputsInline()](/reference/js/blockly.block_class.getinputsinline_1_method.html)                                     |             | Get whether value inputs are arranged horizontally or vertically.                                                                                                                                                                                                                                                                                                    |
| [getInputTargetBlock(name)](/reference/js/blockly.block_class.getinputtargetblock_1_method.html)                         |             | Fetches the block attached to the named input.                                                                                                                                                                                                                                                                                                                       |
| [getInputWithBlock(block)](/reference/js/blockly.block_class.getinputwithblock_1_method.html)                            |             | Return the input that connects to the specified block.                                                                                                                                                                                                                                                                                                               |
| [getNextBlock()](/reference/js/blockly.block_class.getnextblock_1_method.html)                                           |             | Return the next statement block directly connected to this block.                                                                                                                                                                                                                                                                                                    |
| [getOutputShape()](/reference/js/blockly.block_class.getoutputshape_1_method.html)                                       |             | Get the block's output shape.                                                                                                                                                                                                                                                                                                                                        |
| [getParent()](/reference/js/blockly.block_class.getparent_1_method.html)                                                 |             | Return the parent block or null if this block is at the top level. The parent block is either the block connected to the previous connection (for a statement block) or the block connected to the output connection (for a value block).                                                                                                                            |
| [getPreviousBlock()](/reference/js/blockly.block_class.getpreviousblock_1_method.html)                                   |             | Returns the block connected to the previous connection.                                                                                                                                                                                                                                                                                                              |
| [getRelativeToSurfaceXY()](/reference/js/blockly.block_class.getrelativetosurfacexy_1_method.html)                       |             | Return the coordinates of the top-left corner of this block relative to the drawing surface's origin (0,0), in workspace units.                                                                                                                                                                                                                                      |
| [getRootBlock()](/reference/js/blockly.block_class.getrootblock_1_method.html)                                           |             | Return the top-most block in this block's tree. This will return itself if this block is at the top level.                                                                                                                                                                                                                                                           |
| [getStyleName()](/reference/js/blockly.block_class.getstylename_1_method.html)                                           |             | Get the name of the block style.                                                                                                                                                                                                                                                                                                                                     |
| [getSurroundParent()](/reference/js/blockly.block_class.getsurroundparent_1_method.html)                                 |             | Return the parent block that surrounds the current block, or null if this block has no surrounding block. A parent block might just be the previous statement, whereas the surrounding block is an if statement, while loop, etc.                                                                                                                                    |
| [getTooltip()](/reference/js/blockly.block_class.gettooltip_1_method.html)                                               |             | Returns the tooltip text for this block.                                                                                                                                                                                                                                                                                                                             |
| [getVars()](/reference/js/blockly.block_class.getvars_1_method.html)                                                     |             | Return all variables referenced by this block.                                                                                                                                                                                                                                                                                                                       |
| [hasIcon(type)](/reference/js/blockly.block_class.hasicon_1_method.html)                                                 |             |                                                                                                                                                                                                                                                                                                                                                                      |
| [initModel()](/reference/js/blockly.block_class.initmodel_1_method.html)                                                 |             | Call initModel on all fields on the block. May be called more than once. Either initModel or initSvg must be called after creating a block and before the first interaction with it. Interactions include UI actions (e.g. clicking and dragging) and firing events (e.g. create, delete, and change).                                                               |
| [isCollapsed()](/reference/js/blockly.block_class.iscollapsed_1_method.html)                                             |             | Get whether the block is collapsed or not.                                                                                                                                                                                                                                                                                                                           |
| [isDeletable()](/reference/js/blockly.block_class.isdeletable_1_method.html)                                             |             | Get whether this block is deletable or not.                                                                                                                                                                                                                                                                                                                          |
| [isDisposed()](/reference/js/blockly.block_class.isdisposed_1_method.html)                                               |             | Returns if this block has been disposed of / deleted.                                                                                                                                                                                                                                                                                                                |
| [isDuplicatable()](/reference/js/blockly.block_class.isduplicatable_1_method.html)                                       |             | Get whether is block is duplicatable or not. If duplicating this block and descendants will put this block over the workspace's capacity this block is not duplicatable. If duplicating this block and descendants will put any type over their maxInstances this block is not duplicatable.                                                                         |
| [isEnabled()](/reference/js/blockly.block_class.isenabled_1_method.html)                                                 |             | Get whether this block is enabled or not.                                                                                                                                                                                                                                                                                                                            |
| [isInsertionMarker()](/reference/js/blockly.block_class.isinsertionmarker_1_method.html)                                 |             | Get whether this block is an insertion marker block or not.                                                                                                                                                                                                                                                                                                          |
| [isOwnDeletable()](/reference/js/blockly.block_class.isowndeletable_1_method.html)                                       |             | Return whether this block's own deletable property is true or false.                                                                                                                                                                                                                                                                                                 |
| [isOwnEditable()](/reference/js/blockly.block_class.isowneditable_1_method.html)                                         |             | Return whether this block's own editable property is true or false.                                                                                                                                                                                                                                                                                                  |
| [isShadow()](/reference/js/blockly.block_class.isshadow_1_method.html)                                                   |             | Get whether this block is a shadow block or not.                                                                                                                                                                                                                                                                                                                     |
| [jsonInit(json)](/reference/js/blockly.block_class.jsoninit_1_method.html)                                               |             | Initialize this block using a cross-platform, internationalization-friendly JSON description.                                                                                                                                                                                                                                                                        |
| [mixin(mixinObj, opt_disableCheck)](/reference/js/blockly.block_class.mixin_1_method.html)                               |             | Add key/values from mixinObj to this block object. By default, this method will check that the keys in mixinObj will not overwrite existing values in the block, including prototype values. This provides some insurance against mixin / extension incompatibilities with future block features. This check can be disabled by passing true as the second argument. |
| [moveBy(dx, dy, reason)](/reference/js/blockly.block_class.moveby_1_method.html)                                         |             | Move a block by a relative offset.                                                                                                                                                                                                                                                                                                                                   |
| [moveInputBefore(name, refName)](/reference/js/blockly.block_class.moveinputbefore_1_method.html)                        |             | Move a named input to a different location on this block.                                                                                                                                                                                                                                                                                                            |
| [moveNumberedInputBefore(inputIndex, refIndex)](/reference/js/blockly.block_class.movenumberedinputbefore_1_method.html) |             | Move a numbered input to a different location on this block.                                                                                                                                                                                                                                                                                                         |
| [removeIcon(type)](/reference/js/blockly.block_class.removeicon_1_method.html)                                           |             | Removes the icon whose getType matches the given type iconType from the block.                                                                                                                                                                                                                                                                                       |
| [removeInput(name, opt_quiet)](/reference/js/blockly.block_class.removeinput_1_method.html)                              |             | Remove an input from this block.                                                                                                                                                                                                                                                                                                                                     |
| [renameVarById(oldId, newId)](/reference/js/blockly.block_class.renamevarbyid_1_method.html)                             |             | Notification that a variable is renaming. If the ID matches one of this block's variables, rename it.                                                                                                                                                                                                                                                                |
| [setCollapsed(collapsed)](/reference/js/blockly.block_class.setcollapsed_1_method.html)                                  |             | Set whether the block is collapsed or not.                                                                                                                                                                                                                                                                                                                           |
| [setColour(colour)](/reference/js/blockly.block_class.setcolour_1_method.html)                                           |             | Change the colour of a block.                                                                                                                                                                                                                                                                                                                                        |
| [setCommentText(text)](/reference/js/blockly.block_class.setcommenttext_1_method.html)                                   |             | Set this block's comment text.                                                                                                                                                                                                                                                                                                                                       |
| [setDeletable(deletable)](/reference/js/blockly.block_class.setdeletable_1_method.html)                                  |             | Set whether this block is deletable or not.                                                                                                                                                                                                                                                                                                                          |
| [setEditable(editable)](/reference/js/blockly.block_class.seteditable_1_method.html)                                     |             | Set whether this block is editable or not.                                                                                                                                                                                                                                                                                                                           |
| [setEnabled(enabled)](/reference/js/blockly.block_class.setenabled_1_method.html)                                        |             | Set whether the block is enabled or not.                                                                                                                                                                                                                                                                                                                             |
| [setFieldValue(newValue, name)](/reference/js/blockly.block_class.setfieldvalue_1_method.html)                           |             | Sets the value of the given field for this block.                                                                                                                                                                                                                                                                                                                    |
| [setHelpUrl(url)](/reference/js/blockly.block_class.sethelpurl_1_method.html)                                            |             | Set the URL of this block's help page.                                                                                                                                                                                                                                                                                                                               |
| [setInputsInline(newBoolean)](/reference/js/blockly.block_class.setinputsinline_1_method.html)                           |             | Set whether value inputs are arranged horizontally or vertically.                                                                                                                                                                                                                                                                                                    |
| [setMovable(movable)](/reference/js/blockly.block_class.setmovable_1_method.html)                                        |             | Set whether this block is movable or not.                                                                                                                                                                                                                                                                                                                            |
| [setMutator(\_mutator)](/reference/js/blockly.block_class.setmutator_1_method.html)                                      |             | Give this block a mutator dialog.                                                                                                                                                                                                                                                                                                                                    |
| [setNextStatement(newBoolean, opt_check)](/reference/js/blockly.block_class.setnextstatement_1_method.html)              |             | Set whether another block can chain onto the bottom of this block.                                                                                                                                                                                                                                                                                                   |
| [setOnChange(onchangeFn)](/reference/js/blockly.block_class.setonchange_1_method.html)                                   |             | Sets a callback function to use whenever the block's parent workspace changes, replacing any prior onchange handler. This is usually only called from the constructor, the block type initializer function, or an extension initializer function.                                                                                                                    |
| [setOutput(newBoolean, opt_check)](/reference/js/blockly.block_class.setoutput_1_method.html)                            |             | Set whether this block returns a value.                                                                                                                                                                                                                                                                                                                              |
| [setOutputShape(outputShape)](/reference/js/blockly.block_class.setoutputshape_1_method.html)                            |             | Set the block's output shape.                                                                                                                                                                                                                                                                                                                                        |
| [setPreviousStatement(newBoolean, opt_check)](/reference/js/blockly.block_class.setpreviousstatement_1_method.html)      |             | Set whether this block can chain onto the bottom of another block.                                                                                                                                                                                                                                                                                                   |
| [setStyle(blockStyleName)](/reference/js/blockly.block_class.setstyle_1_method.html)                                     |             | Set the style and colour values of a block.                                                                                                                                                                                                                                                                                                                          |
| [setTooltip(newTip)](/reference/js/blockly.block_class.settooltip_1_method.html)                                         |             | Sets the tooltip for this block.                                                                                                                                                                                                                                                                                                                                     |
| [setWarningText(\_text, \_opt_id)](/reference/js/blockly.block_class.setwarningtext_1_method.html)                       |             | Set this block's warning text.                                                                                                                                                                                                                                                                                                                                       |
| [toDevString()](/reference/js/blockly.block_class.todevstring_1_method.html)                                             |             | This method returns a string describing this Block in developer terms (type name and ID; English only). <br /> Intended to on be used in console logs and errors. If you need a string that uses the user's native language (including block text, field values, and child blocks), use \[toString()\].                                                              |
| [toString(opt_maxLength, opt_emptyToken)](/reference/js/blockly.block_class.tostring_1_method.html)                      |             | Create a human-readable text representation of this block and any children.                                                                                                                                                                                                                                                                                          |
| [unplug(opt_healStack)](/reference/js/blockly.block_class.unplug_1_method.html)                                          |             | Unplug this block from its superior block. If this block is a statement, optionally reconnect the block underneath with the block on top.                                                                                                                                                                                                                            |
